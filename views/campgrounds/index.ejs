<% layout('layouts/boilerplate') %>

    <div id="map" class="rounded mb-3" style="height: 300px;"></div>
    <div class="d-flex flex-row-reverse">
        <button id="btnExpend" type="button" class="btn btn-primary">Expend map</button>
    </div>

    <h1>All Campgrounds</h1>
    <a href="campgrounds/new">Add New Camp â›º</a>
    <% for (let camp of campgrounds){ %>
        <div class="card" mb-3>
            <div class="row">
                <div class="col-md-4">
                    <img src=<%= camp.images[0]?.show ?? "https://res.cloudinary.com/dis3rrz4f/image/upload/b_black,c_pad,h_300,w_300/v1714752857/YelpCamp/fallbacks/fallBackImageGemini01_etskbd.jpg" %> alt="camp image" class="img-fluid">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title"><%= camp.title %></h5>
                        <p class="card-text"><%= camp.description %></p>
                        <p class="card-text">
                            <small class="text-muted"><%= camp.city %>, <%= camp.state %></small>
                        </p>
                        <a href="/campgrounds/<%= camp._id %>" class="btn btn-primary">Check out ðŸ‘€</a>
                    </div>
                </div>
            </div>
        </div>
    <% } %>

    <script>
        // const geofeatures = {features: JSON.parse('<%- JSON.stringify(features) %>')};
        const geofeatures = JSON.parse('<%- JSON.stringify(features) %>');
    </script>
    <script src="/javascripts/clusterMap.js"></script>